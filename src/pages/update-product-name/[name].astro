---
import Layout from '../../layouts/Layout.astro'
import UpdateProductName from '../../components/logic/UpdateProductName.svelte'

interface Product {
  id: string
  name: string
  total: number
  price: number
}

const { name } = Astro.params
/*
const response = await fetch(`http://localhost:3000/search/${name}`)
const product = await response.json()
*/

const response = await fetch(`http://localhost:3000/supa/products/search/${name}`)
const newProduct: Product[] = await response.json()
const product = newProduct[0]
---
<Layout>
  <UpdateProductName productName={product.name} productId={product.id} client:load />
</Layout>