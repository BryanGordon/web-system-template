---
import Layout from '../../layouts/Layout.astro'
import UpdateUserName from '../../components/logic/UpdateUserName.svelte'

interface User {
  name: string
  apellido: string
  correo: string
  rol: string
  id: string
}

const { name } = Astro.params
/** 
const response = await fetch(`http://localhost:3000/users/search/${name}`)
const user: User = await response.json()
*/

const response = await fetch(`http://localhost:3000/supa/users/search/${name}`)
const userInfo = await response.json()
const user = userInfo[0]
---
<Layout>
  <UpdateUserName userName={user.name} userId={user.id} client:load/>
</Layout>